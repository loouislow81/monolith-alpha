define("require-tools/text/text",["module"],function(x){var C,k,b,q,D,j=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],B=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,A=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,w=typeof location!="undefined"&&location.href,m=w&&location.protocol&&location.protocol.replace(/\:/,""),z=w&&location.hostname,v=w&&(location.port||undefined),g={},y=x.config&&x.config()||{};C={version:"2.0.10",strip:function(c){if(c){c=c.replace(B,"");var a=c.match(A);a&&(c=a[1])}else{c=""}return c},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:y.createXhr||function(){var d,a,f;if(typeof XMLHttpRequest!="undefined"){return new XMLHttpRequest}if(typeof ActiveXObject!="undefined"){for(a=0;a<3;a+=1){f=j[a];try{d=new ActiveXObject(f)}catch(c){}if(d){j=[f];break}}}return d},parseName:function(h){var c,p,f,a=!1,d=h.indexOf("."),l=h.indexOf("./")===0||h.indexOf("../")===0;return d!==-1&&(!l||d>1)?(c=h.substring(0,d),p=h.substring(d+1,h.length)):c=h,f=p||c,d=f.indexOf("!"),d!==-1&&(a=f.substring(d+1)==="strip",f=f.substring(0,d),p?p=f:c=f),{moduleName:c,ext:p,strip:a}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(p,E,l,f){var h,t,d,c=C.xdRegExp.exec(p);return c?(h=c[2],t=c[3],t=t.split(":"),d=t[1],t=t[0],(!h||h===E)&&(!t||t.toLowerCase()===l.toLowerCase())&&(!d&&!t||d===f)):!0},finishLoad:function(d,f,c,a){c=f?C.strip(c):c,y.isBuild&&(g[d]=c),a(c)},load:function(p,E,l,f){if(f.isBuild&&!f.inlineText){l();return}y.isBuild=f.isBuild;var h=C.parseName(p),t=h.moduleName+(h.ext?"."+h.ext:""),d=E.toUrl(t),c=y.useXhr||C.useXhr;if(d.indexOf("empty:")===0){l();return}!w||c(d,m,z,v)?C.get(d,function(a){C.finishLoad(p,h.strip,a,l)},function(a){l.error&&l.error(a)}):E([t],function(a){C.finishLoad(h.moduleName+"."+h.ext,h.strip,a,l)})},write:function(f,h,d,a){if(g.hasOwnProperty(h)){var c=C.jsEscape(g[h]);d.asModule(f+"!"+h,"define(function () { return '"+c+"';});\n")}},writeFile:function(t,h,c,l,G){var d=C.parseName(h),F=d.ext?"."+d.ext:"",E=d.moduleName+F,p=c.toUrl(d.moduleName+F)+".js";C.load(E,c,function(e){var a=function(f){return l(p,f)};a.asModule=function(n,f){return l.asModule(n,p,f)},C.write(t,E,a,G)},G)}};if(y.env==="node"||!y.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"]){k=require.nodeRequire("fs"),C.get=function(h,c,f){try{var a=k.readFileSync(h,"utf8");a.indexOf("")===0&&(a=a.substring(1)),c(a)}catch(d){f(d)}}}else{if(y.env==="xhr"||!y.env&&C.createXhr()){C.get=function(f,l,d,a){var c=C.createXhr(),h;c.open("GET",f,!0);if(a){for(h in a){a.hasOwnProperty(h)&&c.setRequestHeader(h.toLowerCase(),a[h])}}y.onXhr&&y.onXhr(c,f),c.onreadystatechange=function(n){var e,p;c.readyState===4&&(e=c.status,e>399&&e<600?(p=new Error(f+" HTTP status: "+e),p.xhr=c,d(p)):l(c.responseText),y.onXhrComplete&&y.onXhrComplete(c,f))},c.send(null)}}else{if(y.env==="rhino"||!y.env&&typeof Packages!="undefined"&&typeof java!="undefined"){C.get=function(l,F){var f,c,h="utf-8",G=new java.io.File(l),d=java.lang.System.getProperty("line.separator"),E=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(G),h)),p="";try{f=new java.lang.StringBuffer,c=E.readLine(),c&&c.length()&&c.charAt(0)===65279&&(c=c.substring(1)),c!==null&&f.append(c);while((c=E.readLine())!==null){f.append(d),f.append(c)}p=String(f.toString())}finally{E.close()}F(p)}}else{if(y.env==="xpconnect"||!y.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces){b=Components.classes,q=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),D="@mozilla.org/windows-registry-key;1" in b,C.get=function(p,h){var s,r,d,c={};D&&(p=p.replace(/\//g,"\\")),d=new FileUtils.File(p);try{s=b["@mozilla.org/network/file-input-stream;1"].createInstance(q.nsIFileInputStream),s.init(d,1,0,!1),r=b["@mozilla.org/intl/converter-input-stream;1"].createInstance(q.nsIConverterInputStream),r.init(s,"utf-8",s.available(),q.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(s.available(),c),r.close(),s.close(),h(c.value)}catch(l){throw new Error((d&&d.path||"")+": "+l)}}}}}}return C}),define("require-tools/text/text!templates/dialog.html",[],function(){return'<div class="modal-dialog">\n    <form>\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>\n                <h4 class="modal-title">Commit Changes</h4>\n            </div>\n            <div class="modal-body">\n                <div class="git-changes">\n                    <div class="git-commit form-group">\n                        <textarea class="form-control" rows="2" placeholder="Commit summary"></textarea>\n                    </div>\n                    <ul class="git-changes-files">\n                    <% _.each(git.files || {}, function(file, path) { %>\n                        <li class="file">\n                            <span class="file-type type-<%- file.type || \'A\' %>"><%- file.type || \'A\' %></span>\n                            <span class="path"><%- path %></span>\n                        </li>\n                    <% }); %>\n                    </ul>\n                </div>\n            </div>\n            <div class="modal-footer">\n                <button type="submit" class="btn btn-default">Commit</button>\n            </div>\n        </div>\n    </form>\n</div>'}),define("require-tools/less/normalize",[],function(){function d(n,m,l){if(n.indexOf("data:")===0){return n}n=b(n);var k=l.match(h),j=m.match(h);return j&&(!k||k[1]!=j[1]||k[2]!=j[2])?c(n,m):g(c(n,m),l)}function c(m,k){m.substr(0,2)=="./"&&(m=m.substr(2));if(m.match(/^\//)||m.match(h)){return m}var l=k.split("/"),j=m.split("/");l.pop();while(curPart=j.shift()){curPart==".."?l.pop():l.push(curPart)}return l.join("/")}function g(l,j){var m=j.split("/");m.pop(),j=m.join("/")+"/",i=0;while(j.substr(i,1)==l.substr(i,1)){i++}while(j.substr(i,1)!="/"){i--}j=j.substr(i+1),l=l.substr(i+1),m=j.split("/");var k=l.split("/");out="";while(m.shift()){out+="../"}while(curPart=k.shift()){out+=curPart+"/"}return out.substr(0,out.length-1)}var f=/([^:])\/+/g,b=function(e){return e.replace(f,"$1/")},h=/[^\:\/]*:\/\/([^\/])*/,a=function(q,t,l){t=b(t),l=b(l);var m=/@import\s*("([^"]*)"|'([^']*)')|url\s*\(\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/ig,r,k,q;while(r=m.exec(q)){k=r[3]||r[2]||r[5]||r[6]||r[4];var j;j=d(k,t,l);var p=r[5]||r[6]?1:0;q=q.substr(0,m.lastIndex-k.length-p-1)+j+q.substr(m.lastIndex-p-1),m.lastIndex=m.lastIndex+(j.length-k.length)}return q};return a.convertURIBase=d,a.absoluteURI=c,a.relativeURI=g,a}),define("require-tools/less/less",["require"],function(g){var c={};c.pluginBuilder="./less-builder";if(typeof window=="undefined"){return c.load=function(l,k,m){m()},less}c.normalize=function(l,k){return l.substr(l.length-5,5)==".less"&&(l=l.substr(0,l.length-5)),l=k(l),l};var j=document.getElementsByTagName("head")[0],f=window.location.href.split("/");f[f.length-1]="",f=f.join("/");var b;window.less=window.less||{env:"development"};var d=0,h;c.inject=function(k){d<31&&(h=document.createElement("style"),h.type="text/css",j.appendChild(h),d++),h.styleSheet?h.styleSheet.cssText+=k:h.appendChild(document.createTextNode(k))};var a;return c.load=function(m,k,l,e){g(["./lessc","./normalize"],function(o,p){if(!b){var n=g.toUrl("base_url").split("/");n[n.length-1]="",b=p.absoluteURI(n.join("/"),f)+"/"}var q=k.toUrl(m+".less");q=p.absoluteURI(q,b),a=a||new o.Parser(window.less),a.parse('@import "'+q+'";',function(r,s){if(r){return l.error(r)}c.inject(p(s.toCSS(),q,f)),setTimeout(l,7)})})},c}),define("require-tools/less/less!stylesheets/git",[],function(){}),define("views/dialog",["text!templates/dialog.html","less!stylesheets/git.less"],function(f){var b=monolith.require("views/dialogs/base"),g=monolith.require("core/box"),d=monolith.require("core/backends/rpc"),a=monolith.require("core/operations"),c=b.extend({className:"addon-git-dialog modal fade",templateLoader:"text",template:f,events:_.extend({},b.prototype.events,{"submit form":"submit"}),initialize:function(j){var h=this;return c.__super__.initialize.apply(this,arguments),h.git=null,d.execute("git/status").then(function(k){h.git=k,h.render()}),this},templateContext:function(){return{git:this.git}},render:function(){return this.git?c.__super__.render.apply(this,arguments):this},finish:function(){return c.__super__.finish.apply(this,arguments)},submit:function(k){k&&k.preventDefault();var h=this,l=this.$(".git-commit .btn-git-sync").hasClass("active"),j=this.$(".git-commit textarea").val();if(j.length==0){return}a.start("git.commit",function(m){return d.execute("git/commit",{message:j})},{title:"Commiting"}).then(function(){h.close()})}});return c}),define("client",["views/dialog"],function(y){var E=monolith.require("hr/promise"),k=monolith.require("core/commands/toolbar"),b=monolith.require("core/app"),q=monolith.require("core/box"),F=monolith.require("utils/dialogs"),j=monolith.require("core/commands/menu"),q=monolith.require("core/box"),D=monolith.require("models/command"),B=monolith.require("core/backends/rpc"),x=monolith.require("core/operations"),m=function(){return B.execute("git/status").then(function(){return C(!0),w(!1)},function(a){C(!1)})},A=D.register({title:"Switch To Branch",type:"menu",offline:!1}),w=function(a){return B.execute("git/branches").then(function(c){A.menu.reset(_.map(c,function(d){return{title:d.name,flags:d.active?"active":"",action:function(){var e=d.name;return x.start("git.checkout",function(f){return B.execute("git/checkout",{ref:e})},{title:"Checkout '"+e+"'"}).then(w)}}}))},function(c){return a!==!1&&m(),E.reject(c)})},g=function(a){return E(a()).fail(function(d){if(d.code==401){var c={username:{type:"text",label:"Username"},password:{type:"password",label:"Password"}};return d.message.toLowerCase().indexOf("authentication")<0&&(c={passphrase:{type:"text",label:"Passphrase"}}),F.fields("Need authentication:",c).then(a)}return E.reject(d)})},z=j.register("git",{title:"Repository",offline:!1}),C=function(a){z.clearMenu(),a?z.menuSection([{title:"Commit",shortcuts:["mod+shift+C"],offline:!1,action:function(){F.open(y)}}]).menuSection([{title:"Synchronize",shortcuts:["mod+S"],offline:!1,action:function(){return x.start("git.sync",function(c){return g(function(d){return B.execute("git/sync",{auth:d||{}})})},{title:"Pushing & Pulling"})}},{title:"Push",shortcuts:["mod+P"],offline:!1,action:function(){return x.start("git.push",function(c){return g(function(d){return B.execute("git/push",{auth:d||{}})})},{title:"Pushing"})}},{title:"Pull",shortcuts:["shift+mod+P"],offline:!1,action:function(){return x.start("git.pull",function(c){return g(function(d){return B.execute("git/pull",{auth:d||{}})})},{title:"Pulling"})}}]).menuSection([A,{title:"Refresh branches",offline:!1,action:w}]).menuSection([{title:"Create a branch",offline:!1,action:function(){F.prompt("Create a branch","Enter the name for the new branch:").then(function(c){if(!c){return}x.start("git.branch.create",function(d){return B.execute("git/branch/create",{name:c})},{title:"Creating branch '"+c+"'"})})}},{title:"Delete a branch",offline:!1,action:function(){F.prompt("Delete a branch","Enter the name of the branch you want to delete:").then(function(c){if(!c){return}x.start("git.branch.delete",function(d){return B.execute("git/branch/delete",{name:c})},{title:"Deleting branch '"+c+"'"}).then(w)})}}]):z.menuSection([{title:"No GIT Repository detected",type:"label",icons:{menu:"warning"}},{title:"Initialize Local Repository",offline:!1,action:function(){return x.start("git.init",function(c){return B.execute("git/init")},{title:"Initializing GIT repository"})}},{title:"Clone Remote Repository",offline:!1,action:function(){return x.start("git.clone",function(c){return F.prompt("Clone Remote Repository","Remote repository URI:").then(function(d){if(!d){return}return g(function(e){return B.execute("git/clone",{url:d,auth:e||{}})})})},{title:"Cloning GIT repository"})}}])};q.on("box:git",function(){m()}),m()}),function(d){var b=document,f="appendChild",c="styleSheet",a=b.createElement("style");a.type="text/css",b.getElementsByTagName("head")[0][f](a),a[c]?a[c].cssText=d:a[f](b.createTextNode(d))}(".addon-git-dialog .modal-body{padding:0}.addon-git-dialog .modal-footer,.addon-git-dialog .navbar{margin:0}.addon-git-dialog .git-changes .git-commit{padding:15px 10px;margin:0;background:#333333}.addon-git-dialog .git-changes .git-commit textarea{resize:none}.addon-git-dialog .git-changes .git-changes-files{list-style:none;margin:0;padding:0}.addon-git-dialog .git-changes .git-changes-files .file{background:#fdfdfd;box-shadow:0 1px 0 #fff inset;border-top:1px solid #ddd;padding:6px 6px 6px 55px;position:relative;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.addon-git-dialog .git-changes .git-changes-files .file .file-type{position:absolute;display:block;top:0;left:0;width:45px;bottom:0;padding:6px;text-align:center;color:#fff}.addon-git-dialog .git-changes .git-changes-files .file .file-type.type-M{background:#3498db}.addon-git-dialog .git-changes .git-changes-files .file .file-type.type-A{background:#2ecc71}.addon-git-dialog .git-changes .git-changes-files .file .file-type.type-D{background:#e74c3c}");