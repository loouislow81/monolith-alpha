define("models/log",[],function(){var e=require("hr/hr"),t=e.Model.extend({defaults:{section:null,type:null,content:[]},contentText:function(){return _.map(this.get("content"),function(e){return _.isString(e)?e:JSON.stringify(e)}).join(" ")}});return t}),define("collections/logs",["models/log"],function(e){var t=require("hr/hr"),n=t.Collection.extend({model:e});return n}),define("require-tools/less/normalize",[],function(){function r(e,r,i){if(e.indexOf("data:")===0)return e;e=t(e);var u=i.match(n),a=r.match(n);return a&&(!u||u[1]!=a[1]||u[2]!=a[2])?s(e,r):o(s(e,r),i)}function s(e,t){e.substr(0,2)=="./"&&(e=e.substr(2));if(e.match(/^\//)||e.match(n))return e;var r=t.split("/"),i=e.split("/");r.pop();while(curPart=i.shift())curPart==".."?r.pop():r.push(curPart);return r.join("/")}function o(e,t){var n=t.split("/");n.pop(),t=n.join("/")+"/",i=0;while(t.substr(i,1)==e.substr(i,1))i++;while(t.substr(i,1)!="/")i--;t=t.substr(i+1),e=e.substr(i+1),n=t.split("/");var r=e.split("/");out="";while(n.shift())out+="../";while(curPart=r.shift())out+=curPart+"/";return out.substr(0,out.length-1)}var e=/([^:])\/+/g,t=function(t){return t.replace(e,"$1/")},n=/[^\:\/]*:\/\/([^\/])*/,u=function(e,n,i){n=t(n),i=t(i);var s=/@import\s*("([^"]*)"|'([^']*)')|url\s*\(\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/ig,o,u,e;while(o=s.exec(e)){u=o[3]||o[2]||o[5]||o[6]||o[4];var a;a=r(u,n,i);var f=o[5]||o[6]?1:0;e=e.substr(0,s.lastIndex-u.length-f-1)+a+e.substr(s.lastIndex-f-1),s.lastIndex=s.lastIndex+(a.length-u.length)}return e};return u.convertURIBase=r,u.absoluteURI=s,u.relativeURI=o,u}),define("require-tools/less/less",["require"],function(e){var t={};t.pluginBuilder="./less-builder";if(typeof window=="undefined")return t.load=function(e,t,n){n()},less;t.normalize=function(e,t){return e.substr(e.length-5,5)==".less"&&(e=e.substr(0,e.length-5)),e=t(e),e};var n=document.getElementsByTagName("head")[0],r=window.location.href.split("/");r[r.length-1]="",r=r.join("/");var i;window.less=window.less||{env:"development"};var s=0,o;t.inject=function(e){s<31&&(o=document.createElement("style"),o.type="text/css",n.appendChild(o),s++),o.styleSheet?o.styleSheet.cssText+=e:o.appendChild(document.createTextNode(e))};var u;return t.load=function(n,s,o,a){e(["./lessc","./normalize"],function(a,f){if(!i){var l=e.toUrl("base_url").split("/");l[l.length-1]="",i=f.absoluteURI(l.join("/"),r)+"/"}var c=s.toUrl(n+".less");c=f.absoluteURI(c,i),u=u||new a.Parser(window.less),u.parse('@import "'+c+'";',function(e,n){if(e)return o.error(e);t.inject(f(n.toCSS(),c,r)),setTimeout(o,7)})})},t}),define("require-tools/less/less!stylesheets/logs",[],function(){}),define("views/logs",["collections/logs","less!stylesheets/logs.less"],function(e){var t=codebox.require("underscore"),n=codebox.require("jQuery"),r=codebox.require("hr/hr"),i=codebox.require("views/tabs/base"),s=codebox.require("core/box"),o=r.List.Item.extend({templateLoader:"addon.cb.monitor.templates",template:"log.html",className:"log-item",events:{},templateContext:function(){return{log:this.model}}}),u=r.List.extend({className:"monitor-logs-list",Collection:e,Item:o,defaults:t.defaults({},r.List.prototype.defaults)});return u}),define("require-tools/less/less!stylesheets/tab",[],function(){}),define("views/tab",["views/logs","less!stylesheets/tab.less"],function(e){var t=codebox.require("underscore"),n=codebox.require("jQuery"),r=codebox.require("hr/hr"),i=codebox.require("views/tabs/base"),s=codebox.require("core/box"),o=i.extend({templateLoader:"addon.cb.monitor.templates",template:"tab.html",className:i.prototype.className+" addon-monitor-tab",events:{"click .action-monitor-clear":"clearLogs","keyup .filter-query":"filterLogs"},initialize:function(t){return o.__super__.initialize.apply(this,arguments),this.setTabTitle("Logging Output"),this.logs=new e,this.logs.on("change:add",function(){this.animation!=null&&this.animation.stop(),this.animation=this.$(".monitor-logs").animate({scrollTop:this.$(".monitor-logs")[0].scrollHeight},60)},this),s.on("box:log",function(e){this.logs.collection.add(e.data)},this),this},finish:function(){return this.logs.$el.appendTo(this.$(".monitor-logs")),o.__super__.finish.apply(this,arguments)},clearLogs:function(e){e&&e.preventDefault(),this.logs.collection.reset([])},filterLogs:function(e){var t=this.$(".filter-query").val().toLowerCase();this.logs.filter(function(e){return e.get("section","").toLowerCase().search(t)>=0},this)}});return o}),define("client",["views/tab"],function(e){var t=codebox.require("core/commands"),n=codebox.require("core/tabs"),r=codebox.require("core/menu"),i=t.register("monitor.open",{title:"Monitor",icon:"dashboard",visible:!1},function(){n.add(e,{},{uniqueId:"monitor",type:"monitor",section:"terminals"})});r.getById("file").menu.add(i)}),function(e){var t=document,n="appendChild",r="styleSheet",i=t.createElement("style");i.type="text/css",t.getElementsByTagName("head")[0][n](i),i[r]?i[r].cssText=e:i[n](t.createTextNode(e))}(".monitor-logs-list{margin:0;padding:0;list-style:none}.monitor-logs-list .log-item{position:relative}.monitor-logs-list .log-item span{padding:4px 8px;display:block;position:absolute;top:0;bottom:0}.monitor-logs-list .log-item span.log-section{background:#eee;left:0;width:100px;text-align:center}.monitor-logs-list .log-item span.log-type{color:#fff;left:100px;width:50px;text-align:center}.monitor-logs-list .log-item span.log-type.type-error{background:#c0392b}.monitor-logs-list .log-item span.log-type.type-log{background:#3498db}.monitor-logs-list .log-item span.log-content{position:static;margin-left:150px}.addon-monitor-tab .filter-query{float:right;border:1px solid #ccc;padding:3px 6px;width:200px}.addon-monitor-tab .filter-query:hover,.addon-monitor-tab .filter-query:focus{outline:0}")