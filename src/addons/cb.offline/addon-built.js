define("client",[],function(){var e=codebox.require("core/app"),t=codebox.require("core/box"),n=codebox.require("core/commands/menu"),r=codebox.require("core/commands/toolbar"),i=codebox.require("hr/hr"),s=codebox.require("models/command"),o=codebox.require("core/localfs"),u=new s({},{title:"Changes",type:"menu"}),a=n.register("offline.changes",{title:"Changes",position:95,offline:!1,flags:"disabled"}).menuSection([{title:"Recalcul Changes",offline:!1,icon:"refresh",action:function(){return o.sync()}},{title:"Apply All Changes",offline:!1,action:function(){return alert("apply all"),o.changes.applyAll()}}]).menuSection([u]);o.changes.on("add remove reset",function(){a.toggleFlag("disabled",o.changes.size()==0),u.menu.reset(o.changes.map(function(e){return e.command()}))});var f=r.register("offline.check",{title:"Check Connexion",offline:!0,icon:"bolt"},function(){i.Offline.check()}),l=s.register("offline.sync.menu",{type:"menu",title:"Synchronize"});l.menuSection(f),l.menuSection([{title:"Calcul Changes",offline:!1,icon:"refresh",action:function(){return o.sync()}},{title:"Reset Offline Cache",offline:!1,icon:"refresh",action:function(){return o.reset()}}]),n.getById("file").menuSection([l],{position:10}),n.register("offline",{title:"Offline",position:90,offline:!0}).menuSection([f]),setInterval(function(){o.autoSync()},3e5),t.on("box:watch",function(){o.autoSync()}),setTimeout(function(){o.sync()},5e3)})