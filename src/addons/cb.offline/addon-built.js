define("client",[],function(){var e=codebox.require("core/app"),t=codebox.require("core/box"),n=codebox.require("core/commands/menu"),r=codebox.require("core/commands/toolbar"),i=codebox.require("hr/hr"),s=codebox.require("models/command"),o=codebox.require("core/localfs"),u=n.register("offline.changes",{title:"Changes",position:95,flags:"disabled"});o.changes.on("add remove reset",function(){u.toggleFlag("disabled",o.changes.size()==0),u.menu.reset(o.changes.map(function(e){return e.command()}))});var a=r.register("offline.check",{title:"Check Connexion",offline:!0,icon:"bolt"},function(){i.Offline.check()}),f=s.register("offline.sync.menu",{type:"menu",title:"Synchronize"});f.menuSection(a),f.menuSection([{title:"Calcul Changes",offline:!1,icon:"refresh",action:function(){return o.sync()}},{title:"Reset Offline Cache",offline:!1,icon:"refresh",action:function(){return o.reset()}}]),n.getById("file").menuSection([f],{position:10}),n.register("offline",{title:"Offline",position:90,offline:!0}).menuSection([a]),setInterval(function(){o.autoSync()},3e5),t.on("box:watch",function(){o.autoSync()}),setTimeout(function(){o.sync()},3e4)})